{
	"name": "WebhookRelay Go Development",
	"image": "mcr.microsoft.com/devcontainers/go:1-1.24-bookworm",
	
	"features": {
		"ghcr.io/devcontainers/features/docker-in-docker:2": {},
		"ghcr.io/devcontainers/features/git:1": {}
	},

	"forwardPorts": [
		8080,
		8000,
		8081,
		9092,
		5432,
		6379
	],

	"portsAttributes": {
		"8080": {
			"label": "REST API",
			"onAutoForward": "notify"
		},
		"8000": {
			"label": "gRPC API",
			"onAutoForward": "notify"
		},
		"8081": {
			"label": "Metrics",
			"onAutoForward": "notify"
		},
		"9092": {
			"label": "Kafka",
			"onAutoForward": "silent"
		},
		"5432": {
			"label": "PostgreSQL",
			"onAutoForward": "silent"
		},
		"6379": {
			"label": "Redis",
			"onAutoForward": "silent"
		}
	},

	"customizations": {
		"vscode": {
			"extensions": [
				"golang.go",
				"ms-azuretools.vscode-docker",
				"ms-vscode.makefile-tools",
				"zxh404.vscode-proto3"
			],
			"settings": {
				"go.useLanguageServer": true,
				"go.toolsManagement.autoUpdate": true,
				"go.lintTool": "golangci-lint",
				"go.lintOnSave": "workspace"
			}
		}
	},

	"postCreateCommand": "go mod download && ./scripts/gen-proto.sh",

	"remoteUser": "vscode"
}
